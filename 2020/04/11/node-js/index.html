<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js | 变形金刚的秘密基地</title>
    <meta name="description" content="Node.js是使用Chrome V8引擎的javascript允许环境。它使用了一个事件驱动、非阻塞式I/O的模型。
&gt; Node是一个让javascript运行在服务端的开发平台，它让javascript成为PHP、Python、Perl、Ruby等服务端语言平起平坐的脚本语言
&gt; Node是一个给予Chrome javascript运行时建立的平台，用于方便地搭建响应速度快、 ...">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/blogs/assets/css/0.styles.e8fea278.css" as="style"><link rel="preload" href="/blogs/assets/js/app.02a13dad.js" as="script"><link rel="preload" href="/blogs/assets/js/14.54d3bdf0.js" as="script"><link rel="preload" href="/blogs/assets/js/4.77900f55.js" as="script"><link rel="preload" href="/blogs/assets/js/22.2b15f143.js" as="script"><link rel="prefetch" href="/blogs/assets/js/1.ac27439b.js"><link rel="prefetch" href="/blogs/assets/js/10.4ae1910a.js"><link rel="prefetch" href="/blogs/assets/js/11.6ae1829a.js"><link rel="prefetch" href="/blogs/assets/js/12.1e84f3b3.js"><link rel="prefetch" href="/blogs/assets/js/13.413aefc1.js"><link rel="prefetch" href="/blogs/assets/js/15.f0e69f7c.js"><link rel="prefetch" href="/blogs/assets/js/16.40a475bf.js"><link rel="prefetch" href="/blogs/assets/js/17.300e0916.js"><link rel="prefetch" href="/blogs/assets/js/18.96430f10.js"><link rel="prefetch" href="/blogs/assets/js/19.8ba19910.js"><link rel="prefetch" href="/blogs/assets/js/20.4059831a.js"><link rel="prefetch" href="/blogs/assets/js/21.6b4ca879.js"><link rel="prefetch" href="/blogs/assets/js/23.fa770469.js"><link rel="prefetch" href="/blogs/assets/js/24.ebfb8e02.js"><link rel="prefetch" href="/blogs/assets/js/25.c0427775.js"><link rel="prefetch" href="/blogs/assets/js/5.e6039608.js"><link rel="prefetch" href="/blogs/assets/js/6.f8324cd1.js"><link rel="prefetch" href="/blogs/assets/js/7.dfdc6034.js"><link rel="prefetch" href="/blogs/assets/js/8.ea5d24f1.js"><link rel="prefetch" href="/blogs/assets/js/9.abd88ae5.js"><link rel="prefetch" href="/blogs/assets/js/vuejs-paginate.6c25a223.js">
    <link rel="stylesheet" href="/blogs/assets/css/0.styles.e8fea278.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><img src="https://cn.vuejs.org/images/logo.png" alt> <a href="/blogs/" class="nav-link home-link">变形金刚的秘密基地 </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/blogs/" class="nav-link">我的博客</a> <span></span></li><li class="nav-item"><a href="/blogs/tag/" class="nav-link">标签</a> <span></span></li><li class="nav-item"><a href="/blogs/about/" class="nav-link">关于我</a> <span></span></li><li class="nav-item"><a href="/blogs/Calendar/" class="nav-link">万年历</a> <span></span></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/blogs/" class="nav-link mobile-home-link">变形金刚的秘密基地 </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/blogs/" class="nav-link">我的博客</a></li><li class="mobile-nav-item"><a href="/blogs/tag/" class="nav-link">标签</a></li><li class="mobile-nav-item"><a href="/blogs/about/" class="nav-link">关于我</a></li><li class="mobile-nav-item"><a href="/blogs/Calendar/" class="nav-link">万年历</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        
      </h1> <div class="post-meta"><div itemprop="publisher author" itemtype="http://schema.org/Person" itemscope="itemscope" class="post-meta-author"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-navigation"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg> <span itemprop="name">Joe</span> <span itemprop="address">   in HangZhou</span></div> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2020-4-11">
      Sat Apr 11 2020
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-647bcdc6><a href="/blogs/tags/心得" data-v-647bcdc6> 心得 </a></li><li class="post-tag" data-v-647bcdc6><a href="/blogs/tags/Node" data-v-647bcdc6> Node </a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><h1 id="node-js"><a href="#node-js" class="header-anchor">#</a> Node.js</h1> <blockquote><p>Node.js是使用Chrome V8引擎的javascript允许环境。它使用了一个事件驱动、非阻塞式I/O的模型。<br>
Node是一个让javascript运行在服务端的开发平台，它让javascript成为PHP、Python、Perl、Ruby等服务端语言平起平坐的脚本语言
Node是一个给予Chrome javascript运行时建立的平台，用于方便地搭建响应速度快、易于扩展的网络应用。Node使用事件驱动，非阻塞I/O模型，而得以轻量和高效，非常适合在分布式设备上运行数据密集型的实时应用</p></blockquote> <hr> <p>Node的底层是将javascript编译后,由中间层(Node bindings)转化为Cpp代码，再与内核(由C与Cpp编写)进行数据交互，保证了运行代码时的效率。<br> <img src="/blogs/imgs/2020-4-11-node-1.png" alt="NodeCore" width="500"></p> <h3 id="node-js的特点"><a href="#node-js的特点" class="header-anchor">#</a> Node.js的特点</h3> <ul><li>事件驱动</li> <li>非阻塞I/O模型 (天生拥有异步编程的优势)</li> <li>单线程</li> <li>拥有世界上最大的开源生态系统(NPM)</li></ul> <hr> <p>Node的下载网址: <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener noreferrer">Node中文网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="node的环境配置"><a href="#node的环境配置" class="header-anchor">#</a> Node的环境配置</h3> <blockquote><p>window: 我的电脑 -&gt; 属性 -&gt; 高级系统配置 -&gt; 环境变量  -&gt; 新增变量 -&gt;</p></blockquote> <p>安装nvm：</p> <blockquote><p>nvm是一个node的版本管理工具</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// nvm常用命令
nvm list
nvm install 版本号
nvm use 版本号
</code></pre></div><h3 id="进入交互环境-repl-read-eval-print-loop"><a href="#进入交互环境-repl-read-eval-print-loop" class="header-anchor">#</a> 进入交互环境 (REPL: Read-Eval-Print-loop)</h3> <p>进入命令行模式 -&gt; 输入&quot;node&quot; -&gt; 编写代码</p> <h3 id="node常用api"><a href="#node常用api" class="header-anchor">#</a> Node常用API</h3> <ul><li>path (路径)
<ul><li>path模块用于提供处理文件路径和目录路径的使用工具</li> <li>常用pathAPI</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 引入path到当前环境</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token comment">// 获取文件名</span>
path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'../../../index/html'</span><span class="token punctuation">)</span>
<span class="token comment">// 获取路径名</span>
path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span><span class="token string">'../../..'</span><span class="token punctuation">)</span>
<span class="token comment">// 获取后缀名</span>
path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span>
<span class="token comment">// 将一个对象转化为路径名</span>
path<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  dir<span class="token operator">:</span> <span class="token string">'C:\\path\\dir'</span><span class="token punctuation">,</span>
  base<span class="token operator">:</span> <span class="token string">'data.txt'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 将路径名转化为一个对象</span>
path<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'C:\\path\\dir\\data.txt'</span><span class="token punctuation">)</span>
<span class="token comment">// 将字符串拼接为路径 用于不同系统间路径的兼容，node会自动根据当前系统拼接出符合系统格式的路径</span>
path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/foo'</span><span class="token punctuation">,</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'baz/asdf'</span><span class="token punctuation">,</span> <span class="token string">'...'</span><span class="token punctuation">)</span>
</code></pre></div></li> <li>fs (读写文件)
<ul><li>fs模块提供了一个API，用于与文件系统进行交互</li> <li>常用fsAPI</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 引入fs模块到当前环境</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>'fs<span class="token punctuation">)</span>

<span class="token comment">// 写入文件/创建文件</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> data<span class="token punctuation">[</span>option<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
<span class="token comment">// 读取文件</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
<span class="token comment">// 创建文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
<span class="token comment">// 打开文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">opendir</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
<span class="token comment">// 读取文件夹内的文件</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
<span class="token comment">// 删除文件夹</span>
fs<span class="token punctuation">.</span><span class="token function">rmdir</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">[</span>option<span class="token punctuation">]</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'test.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'这是写入文件数据'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'done！'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'test.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 因为从文件中读取出的是Buffer对象，是二进制, 需要转换成字符串来读取。</span>
  data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li>http (http服务)
<ul><li>http提供了使用Http服务器和客户端的API</li> <li>常用httpApi</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span>
http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="搭建静态服务器"><a href="#搭建静态服务器" class="header-anchor">#</a> 搭建静态服务器</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 1 加载模块</span>
<span class="token keyword">let</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2 创建http服务</span>
<span class="token keyword">let</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3 监听请求事件</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// request包含用户请求的所有内容, response用于响应用户的请求</span>
  <span class="token comment">// 3.1 设置响应头, 设置响应报文以解决部分浏览器乱码的问题</span>
  response<span class="token punctuation">.</span><span class="token function">setHeaders</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token string">'text/html; charset=utf-8'</span><span class="token punctuation">)</span>
  <span class="token comment">// 3.2 书写返回数据</span>
  response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'&lt;h1&gt;你好&lt;/h1&gt;'</span><span class="token punctuation">)</span>
  <span class="token comment">// 3.3 结束</span>
  response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 4 监听端口，开启服务</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8081</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'http://localhost: 8081'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="node-js模块化原理"><a href="#node-js模块化原理" class="header-anchor">#</a> node.js模块化原理</h3> <ol><li>何为模块化
js最初是作为网站开发的语言来使用，除了用来界面的交互，也可以进行基本的数据运作。最开始的网站都比较
简单，复杂度耦合度较低。随着网站越来越大，复杂度越来越高，需求也越来越多。js不是模块化编程语言，它不支持类(class)，更不支持模块(module)。<br>
睡着前端发展对于模块需求越来越大，js模块化也经历了从最初的简单模块到AMD和CMD规范的出现，再到ES6的发布，现在可以很方便的在js中使用类和模块了。</li></ol> <ul><li>浏览器端规范</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>× AMD(require.js遵循的AMD规范)
× CMD(Sea.js遵循的CMD规范
× ES6
</code></pre></div><ul><li>服务端规范</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>× CommonJS(Node.js是由CommonJS规范实现)
× Node的应用是由模块组成
</code></pre></div><p>模块化解决的问题：1 命名污染 2 解耦</p> <div class="language-text extra-class"><pre class="language-text"><code>CommonJS的特点
× 所有代码运行在当前代码作用域，不会污染全局作用域
× 模块同步加载，根据代码执行顺序载入
× 模块可以多次加载，只会在第一次加载的时候运行一次，运行结果被缓存
× 以后再次加载模块，会直接从缓存中读取结果

NodeJS大量使用了异步模块，很少使用同步模块
</code></pre></div><ul><li>module对象的属性</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//当前模块id</span>
module<span class="token punctuation">.</span>id<span class="token punctuation">;</span>  
<span class="token comment">// 表示当前模块暴露给外部的值  </span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// parent是一个对象，表示调用当前此模块的模块。</span>
module<span class="token punctuation">.</span>parent<span class="token punctuation">;</span> 
<span class="token comment">// children是一个对象，表示当前模块调用的模块。</span>
module<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
<span class="token comment">// 模块的绝对路径  </span>
module<span class="token punctuation">.</span>filename<span class="token punctuation">;</span>
<span class="token comment">// 从当前模块开始查找node_modules目录，然后依次进入到父目录，查找父目录下的node_modules目录；</span>
<span class="token comment">// 依次迭代，直到根目录下的node_modules目录。</span>
module<span class="token punctuation">.</span>paths<span class="token punctuation">;</span>  
<span class="token comment">// 一个布尔值，表示当前模块是否被完全加载。  </span>
module<span class="token punctuation">.</span>loaded<span class="token punctuation">;</span>

</code></pre></div><div class="language-text extra-class"><pre class="language-text"><code>Module {
  id: '.',
  path: 'D:\\NodeProjects\\node-learn',
  exports: { name: 'text' },
  parent: null,
  filename: 'D:\\NodeProjects\\node-learn\\Test.js',
  loaded: false,
  children: [],
  paths: [
    'D:\\NodeProjects\\node-learn\\node_modules',
    'D:\\NodeProjects\\node_modules',
    'D:\\node_modules'
  ]
}
</code></pre></div><ul><li>node核心模块</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>Node.js提供的模块，例如http模块，fs模块等，称为核心模块。核心模块在node源代码编译过程中编译成了二进制文件，在node进程启动的时候，
部分核心模块就直接加载进内存中(自动缓存)，因此这部分模块是不需要手动加载，而且在路径分析中优先判断，加载速度是最快的。
</code></pre></div><ul><li>文件模块</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>用户自己编写的模块，被称为文件模块。文件模块是需要按需加载的，速度较慢。
</code></pre></div><ul><li>module.exports与exports的区别
<ul><li>module.exports是一个属性，而exports是一个对象，两者都用于暴露模块对外的信息。</li> <li>exports对象和module.exports都是引用类型变量，指向同一个内存地址，在node中，两者一开始都指向一个空对象。</li> <li>exports对象是通过形参的方式进行引入，直接赋值给形参的引用，但是并不能改变作用域之外的值。</li> <li>module.exports是为了解决exports直接赋值的问题所产生的。</li></ul></li></ul> <p>以下用一段js代码帮助理解exports形参和作用域的问题</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> modules <span class="token operator">=</span> <span class="token punctuation">{</span>
  exports<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// exports</span>
<span class="token keyword">var</span> exports <span class="token operator">=</span> modules<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">change</span> <span class="token punctuation">(</span><span class="token parameter">exports</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// exports是通过形参的方式传入exports</span>
  exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'222'</span><span class="token punctuation">;</span>
  <span class="token comment">// exports不能改变作用域外的对象</span>
  exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">20</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>exports<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出age: 20</span>
<span class="token function">change</span><span class="token punctuation">(</span>exports<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出 {}</span>
<span class="token comment">// exports未将原模块的内容改变</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>require模块</li></ul> <div class="language-text extra-class"><pre class="language-text"><code>模块的传入规则，通过exports或者module.exports抛出一个模块，通过require方法传入模块标识符，然后node根据一定的规则引入该模块，
我们就可以使用该模块中定义的方法和属性。
</code></pre></div><ul><li>加载步骤</li></ul> <ol><li>路径分析<div class="language-text extra-class"><pre class="language-text"><code> 模块标识符分析，加载顺序
 1 核心模块
 2 以'.'或者'../'开始的相对路径文件模块
 3 以'.'开始的绝对路径模块
 非路径形式的模块
</code></pre></div></li> <li>文件定位</li> <li>编译执行</li></ol></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h3 active"><a href="#node-js的特点" title="Node.js的特点">Node.js的特点</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#node的环境配置" title="Node的环境配置">Node的环境配置</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#进入交互环境-repl-read-eval-print-loop" title="进入交互环境 (REPL: Read-Eval-Print-loop)">进入交互环境 (REPL: Read-Eval-Print-loop)</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#node常用api" title="Node常用API">Node常用API</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#搭建静态服务器" title="搭建静态服务器">搭建静态服务器</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#node-js模块化原理" title="node.js模块化原理">node.js模块化原理</a></div></div></div></div> <footer class="footer" data-v-f0201fb2><div class="footer-left-wrap" data-v-f0201fb2><ul class="contact" data-v-f0201fb2><li class="contact-item" data-v-f0201fb2><a href="https://github.com/88384490" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-f0201fb2><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-f0201fb2><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-f0201fb2></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-f0201fb2><ul class="copyright" data-v-f0201fb2><li class="copyright-item" data-v-f0201fb2><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-f0201fb2>Privacy Policy</a></li><li class="copyright-item" data-v-f0201fb2><a href="/blogs/2020/04/11/node-js/.html" class="nav-link" data-v-f0201fb2>MIT Licensed | Copyright © 2018-present Vue.js</a></li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/blogs/assets/js/app.02a13dad.js" defer></script><script src="/blogs/assets/js/14.54d3bdf0.js" defer></script><script src="/blogs/assets/js/4.77900f55.js" defer></script><script src="/blogs/assets/js/22.2b15f143.js" defer></script>
  </body>
</html>
